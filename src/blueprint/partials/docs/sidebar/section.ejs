<% 

var anchor = require('/blueprint/partials/components/anchor/index.ejs')({
    class_names: "section-heading",
    href: section_href,
    text: require("/blueprint/partials/components/heading/index.ejs")({
        text: section_title,
        level: 6,
        attrs: {
            class: "text-uppercase fw-bold"
        }
    }),
});

var list = require('/blueprint/partials/components/list/index.ejs')({
    list_type: "ul",
    // attrs: {
    //     class: "list mb-6 ps-34"
    // },
    class_names: "list mb-6 ps-0 list-unstyled",
    list_items: list_items.map((item) => {
        const link = require('/blueprint/partials/components/anchor/index.ejs')({
            text: item.text,
            href: item.href,
            class_names: item.class_names
        });

        const basePrefix = (typeof item.href === 'string')
            ? item.href.replace(/index\.html$/i, '')
            : '';
        const isActive = (typeof current_path === 'string' && current_path)
            ? (current_path === item.href || (basePrefix && current_path.startsWith(basePrefix)))
            : false;

        const allowChildren = item.children_mode === 'active' ? isActive : true;

        const children = allowChildren && Array.isArray(item.children) && item.children.length
            ? require('/blueprint/partials/components/list/index.ejs')({
                list_type: "ul",
                class_names: "list ps-3 mb-2 list-unstyled",
                list_items: item.children.map((child) =>
                    require('/blueprint/partials/elements/list-item/index.ejs')({
                        content: require('/blueprint/partials/components/anchor/index.ejs')({
                            text: child.text,
                            href: child.href,
                            class_names: child.class_names
                        })
                    })
                ).join('')
            })
            : '';

        return require('/blueprint/partials/elements/list-item/index.ejs')({
            content: link + children
        });
    }).join(''),
});
%>
<%- anchor %>
<%- list %>
<style>
    me a.section-heading {
        text-decoration: none;
    }

    me ul li a {
        text-decoration: none;
        color: var(--wp--preset--color--base);
    }
</style>