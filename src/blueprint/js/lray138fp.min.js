!function(t,r){"object"==typeof exports&&"object"==typeof module?module.exports=r():"function"==typeof define&&define.amd?define([],r):"object"==typeof exports?exports.lray138fp=r():t.lray138fp=r()}(globalThis,(()=>(()=>{"use strict";var t={d:(r,e)=>{for(var n in e)t.o(e,n)&&!t.o(r,n)&&Object.defineProperty(r,n,{enumerable:!0,get:e[n]})},o:(t,r)=>Object.prototype.hasOwnProperty.call(t,r),r:t=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})}},r={};t.r(r),t.d(r,{Boo:()=>n,Dom:()=>Dom,Either:()=>i,Err:()=>b,Just:()=>d,Kvm:()=>w,Left:()=>o,Lst:()=>c,Maybe:()=>f,Nothing:()=>x,Num:()=>u,Ok:()=>m,Reader:()=>v,Result:()=>y,Right:()=>s,Str:()=>a,Task:()=>g,Writer:()=>S,addEventListener:()=>k,getElementById:()=>E,querySelector:()=>j,querySelectorAll:()=>A,querySelectorWithin:()=>querySelectorWithin});class e{constructor(){if(new.target===e)throw new Error("Gonad is an abstract class and cannot be instantiated directly.")}map(t){throw new Error("'map' function must be implemented by subtype")}bind(t){throw new Error("'bind' must be implemented by subtype.")}chain(t){return this.bind(t)}flatMap(t){return this.bind(t)}extract(){throw new Error("'extract' must be implemented by subtype.")}join(){return this.extract()}get(){return this.extract()}getOrElse(t){let r=this.extract();return null==r?t:r}goe(t){return this.getOrElse(t)}eqg(t){return this.eq(t).get()}fork(t,r){throw new Error("'fork' function must be implemented by subtype")}bimap(t,r){return this.fork(t,r)}either(t,r){return this.fork(t,r)}static unit(t){throw new Error("unit must be implemented by subtype")}static of(t){return this.unit(t)}static pure(t){return this.unit(t)}extend(t){throw new Error("'extend' must be implemented by subtype.")}ap(t){throw new Error("'ap' must be implemented by subtype.")}type(){return this.constructor.name}}class Boo extends e{map(t){return p(new Boo(t(this.extract())))}bind(t){return t(this.extract())}extend(t){return t(this)}extract(){return this.value}eq(t){return this.map((r=>r==t))}not(){return p(new Boo(!this.extract()))}fork(t,r){let e=this.extract();return e?r(e):t(e)}isTrue(){return!0===this.extract()}isFalse(){return!this.isTrue()}dump(){return console.log(this.extract()),p(this)}constructor(t){super(),null==t&&(t=!1),this.value=t}}function n(t){return p(new Boo(t))}n.of=n;class Num extends e{static unit(t){return new Num(Number(t))}add(t){return this.map((r=>r+t))}sub(t){return this.map((r=>r-t))}mul(t){return this.map((r=>r*t))}div(t){return this.map((r=>r/t))}eq(t){return this.bind((r=>n(r===t)))}map(t){return p(new Num(t(this.extract())))}bind(t){return this.map(t).join()}extract(){return this.value}constructor(t){super(),this.value=t}}function u(t){return p(Num.of(t))}u.of=u;class Either extends e{extract(){return this.value}constructor(){if(super(),new.target===Either)throw new Error("Either is an abstract class and cannot be instantiated directly.")}dump(){return console.log(this.extract()),p(this)}}class Left extends Either{map(){return this}bind(){return this}getOrElse(t){return t}prop(t){return this}static unit(t){return new Left(t)}extract(){return this.value}fork(t,r){return t(this.extract())}ap(t){return this}tap(t){return this}extend(t){return this}eq(t){return!1}constructor(t){super(),this.value=t}}class Right extends Either{map(t){return Right.unit(t(this.extract()))}prop(t){let r=this.extract();return r&&("object"==typeof r||Array.isArray(r))&&t in r?Right.unit(r[t]):Left.unit('prop "'+t+'" not found')}call(t,...r){return this.prop(t).bind((e=>"function"==typeof e?Array.isArray(r[0])?l(e(...r[0])):l(e(...r)):Left.of('prop "'+t+'" is not callable')))}bind(t){return t(this.extract())}ap(t){return t.map(this.extract())}fork(t,r){return r(this.extract())}tap(t){return t(this.extract()),this}extend(t){return t(this)}static unit(t){return new Right(t)}extract(){return this.value}constructor(t){super(),this.value=t}}function i(t,r){return null==r&&(r=""),null==t?o(r):s(t)}function s(t){return p(new Right(t))}function o(t){return p(new Left(t))}class Str extends e{charAt(t){let r=this.extract().charAt(t);return 0==r?o("no character found at index "+t):p(Str.unit(r))}append(t){return p(new Str(this.extract()+t))}prepend(t){return p(new Str(t+this.extract()))}static unit(t){return new Str(String(t))}map(t){return p(new Str(t(this.extract())))}bind(t){return this.map(t).join()}extract(){return this.value}eq(t){return this.bind((r=>n(r===t)))}toString(){return this.extract()}[Symbol.toPrimitive](){return this.extract()}constructor(t){super(),this.value=t}dump(){return console.log(this.extract()),p(this)}}function a(t){return p(Str.of(t))}a.of=a;class Lst extends e{static unit(t){return new this(t)}head(){const[t]=this.extract();return void 0!==t?l(t):o("array contains no elements")}walk(t){let r=this.extract();return r.forEach(((e,n)=>t(e,n,r))),new Proxy(this,h)}map(t){let r=this.extract().map(t);return new Proxy(new Lst(r),h)}prop(t){let r=this.extract();return r&&("object"==typeof r||Array.isArray(r))&&t in r?l(r[t]):o('prop "'+t+'" not found')}call(t,...r){return this.prop(t).bind((e=>"function"==typeof e?Array.isArray(r[0])?l(e(...r[0])):l(e(...r)):o('prop "'+t+'" is not callable')))}ap(t){return this.map((r=>r(t.extract())))}bind(t){let r=this.extract(),e=[];return r.forEach(((r,n)=>e[n]=t(r).join())),new Proxy(new Lst(e),h)}extract(){return this.value}join(t){return t=null==t?"":t,a(this.extract().join(t))}fork(t,r){return r(this.extract())}extend(t){return t(this)}constructor(t){super(),void 0===t&&(t=[]),"object"==typeof t&&Array.isArray(t)||(t=[t]),this.value=t}}function c(t){return p(Lst.of(t))}function l(t){if(t instanceof e)return t;switch(typeof t){case"number":return u(t);case"string":return a(t);case"object":return Array.isArray(t)?c(t):s(t)}return s(t)}c.of=c;const h={get(t,r){const e={Nothing:x,Left:o},n=t.extract();if("symbol"==typeof r)return r===Symbol.toPrimitive?()=>t.extract():"function"==typeof t[r]?t[r].bind(t):null!=n&&null!=n[r]?"function"==typeof n[r]?n[r].bind(n):n[r]:void 0;const u=null==n?e[t.type()]():Object.getPrototypeOf(n);try{return"function"==typeof t[r]?function(...e){return t[r](...e)}:r in u?"function"==typeof n[r]?(...e)=>l(t.bind((t=>t[r](...e)))):()=>t.bind((t=>l(t[r]))):null==n[r]?"Just"==t.type()?()=>x():()=>o(`'${r}' not found.`):()=>l(n[r])}catch(t){return o(t.message)}}};function p(t){return new Proxy(t,h)}class Maybe extends e{extract(){return this.value}constructor(){if(super(),new.target===Maybe)throw new Error("Maybe is an abstract class and cannot be instantiated directly.")}dump(){return console.log(this.extract()),p(this)}}class Nothing extends Maybe{constructor(){super()}map(){return this}bind(){return this}ap(){return this}fork(t,r){return t()}extract(){return null}extend(){return this}static unit(){return new Nothing}}class Just extends Maybe{constructor(t){super(),this.value=t}prop(t){let r=this.extract();return r&&("object"==typeof r||Array.isArray(r))&&t in r?Just.unit(r[t]):Nothing.unit()}call(t,...r){return this.prop(t).bind((t=>"function"==typeof t?Array.isArray(r[0])?wrapType(t(...r[0])):wrapType(t(...r)):Nothing.of()))}map(t){return Just.of(t(this.extract()))}bind(t){return t(this.extract())}ap(t){return t.map(this.extract())}fork(t,r){return r(this.extract())}extend(t){return t(this)}static unit(t){return new Just(t)}}function f(t){return null==t?x():d(t)}function d(t){return p(new Just(t))}function x(){return p(new Nothing)}class Result extends e{extract(){return this.value}constructor(){if(super(),new.target===Result)throw new Error("Result is an abstract class and cannot be instantiated directly.")}dump(){return console.log(this.extract()),p(this)}}class Ok extends Result{map(t){return Ok.unit(t(this.extract()))}bind(t){return t(this.extract())}ap(t){return t.map(this.extract())}fork(t,r){return r(this.extract())}tap(t){return t(this.extract()),this}extend(t){return t(this)}static unit(t){return new Ok(t)}constructor(t){super(),this.value=t}}class Err extends Result{map(){return this}bind(){return this}getOrElse(t){return t}fork(t,r){return t(this.extract())}ap(){return this}tap(){return this}extend(){return this}static unit(t){return new Err(t)}constructor(t){super(),this.value=t}}function y(t,r){return null==r&&(r=""),null==t?b(r):m(t)}function m(t){return p(new Ok(t))}function b(t){return p(new Err(t))}class Kvm extends e{static unit(t){return new this(t)}walk(t){let r=this.extract();return Object.entries(r).forEach((([e,n])=>t(n,e,r))),new Proxy(this,h)}map(t){let r=this.extract(),e=Object.fromEntries(Object.entries(r).map((([r,e])=>[r,t(e)])));return new Proxy(new Kvm(e),h)}prop(t){let r=this.extract();return r&&"object"==typeof r&&t in r?l(r[t]):o('prop "'+t+'" not found')}path(t){if("string"!=typeof t||""===t.trim())return o('path "'+t+'" not found');const r=t.trim().split(/[/.]+/).filter((t=>""!==t)).flatMap((t=>{const r=[],e=/([^[\]]+)|\[(\d+)\]/g;let n;for(;null!==(n=e.exec(t));)r.push(n[1]??n[2]);return r}));let e=this.extract();for(const n of r){if(null==e||!(n in e))return o('path "'+t+'" not found');e=e[n]}return l(e)}tryPath(t){const r=this.path(t);return"Left"===r.type()?b(r.extract()):m(r)}call(t,...r){return this.prop(t).bind((e=>"function"==typeof e?Array.isArray(r[0])?l(e(...r[0])):l(e(...r)):o('prop "'+t+'" is not callable')))}ap(t){return this.map((r=>r(t.extract())))}bind(t){let r=this.extract(),e={};return Object.entries(r).forEach((([r,n])=>{e[r]=t(n).extract()})),new Proxy(new Kvm(e),h)}extract(){return this.value}join(t){return t=null==t?"":t,a(Object.values(this.extract()).join(t))}fork(t,r){return r(this.extract())}extend(t){return t(this)}constructor(t){super(),null==t&&(t={}),Array.isArray(t)&&(t=Object.fromEntries(t.map(((t,r)=>[r,t])))),"object"!=typeof t&&(t={value:t}),this.value=t}}function w(t){return p(Kvm.of(t))}w.of=w;class Task extends e{constructor(t){super(),this.computation=this.normalize(t)}normalize(t){return"function"!=typeof t?(r,e)=>e(t):t.length>=2?t:(r,e)=>{try{const n=t();n&&"function"==typeof n.then?n.then(e).catch(r):e(n)}catch(t){r(t)}}}static unit(t){return new Task(((r,e)=>e(t)))}map(t){return new Task(((r,e)=>{this.fork(r,(r=>e(t(r))))}))}bind(t){return new Task(((r,e)=>{this.fork(r,(n=>t(n).fork(r,e)))}))}extract(){return this.computation}fork(t,r){return this.extract()(t,r)}ap(t){return new Task(((r,e)=>{this.fork(r,(n=>{t.fork(r,(t=>{e(n(t))}))}))}))}}function g(t){return new Task(t)}g.unit=Task.unit.bind(Task),g.of=Task.of.bind(Task);class Reader extends e{constructor(t){super(),this.action=t}static unit(t){return new Reader(t)}static of(t){return this.unit(value)}static pure(t){return this.unit(value)}map(t){return new Reader((r=>t(this.run(r))))}bind(t){return new Reader((r=>t(this.run(r)).run(r)))}ask(){return new Reader((t=>t))}local(t){return new Reader((r=>this.run(t(r))))}run(t){return this.action(t)}extend(t){return t(this)}dump(t){return console.log(this.run(t)),this}}function v(t){return Reader.unit(t)}class Dom{static getElementById(t){let r=document.getElementById(t);return null==r?o(`no element with id ${t} found`):s(r)}static querySelector(t){return Dom.querySelectorWithin(t,document)}static querySelectorWithin(t,r){let e=r.querySelector(t);return null==e?o(`no element with selector ${t} found`):s(e)}static querySelectorAll(t){let r=document.querySelectorAll(t);return 0==r.length?o(`no elements with selector ${t} found`):c(Array.from(r))}static addEventListener(t,r,e){try{e.addEventListener(t,r)}catch(t){return o("problem attaching event listener")}}}function E(t){return Dom.getElementById(t)}function j(t){return Dom.querySelector(t)}function querySelectorWithin(t,r){return Dom.querySelectorWithin(t,r)}function A(t){return Dom.querySelectorAll(t)}const k=function(t){const r=t.length;return function e(...n){return n.length>=r?t.apply(this,n):function(...t){return e.apply(this,n.concat(t))}}}(((t,r,e)=>Dom.addEventListener(t,r,e)));class Writer extends e{constructor(t,r=[]){super(),this.value=t,this.log=Array.isArray(r)?r:[r]}static unit(t,r){return new Writer(t,r)}static of(t,r){return this.unit(t,r)}static pure(t,r){return this.unit(t,r)}map(t){return new Writer(t(this.value),this.log)}bind(t){const r=t(this.value);return new Writer(r.value,[...this.log,...r.log])}tell(t){return new Writer(this.value,[...this.log,t])}extract(){return{value:this.value,log:this.log}}extend(t){return t(this)}fork(t,r){return r(this.extract())}dump(){return console.log(this.extract()),this}}function S(t,r){return Writer.of(t,r)}return r})()));console.log('wtf');