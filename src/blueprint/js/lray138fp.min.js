!function(t,r){"object"==typeof exports&&"object"==typeof module?module.exports=r():"function"==typeof define&&define.amd?define([],r):"object"==typeof exports?exports.lray138_fp=r():t.lray138_fp=r()}(globalThis,(()=>(()=>{"use strict";var t={d:(r,e)=>{for(var n in e)t.o(e,n)&&!t.o(r,n)&&Object.defineProperty(r,n,{enumerable:!0,get:e[n]})},o:(t,r)=>Object.prototype.hasOwnProperty.call(t,r),r:t=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})}},r={};t.r(r),t.d(r,{Arr:()=>h,Boo:()=>n,Dom:()=>Dom,Either:()=>u,Future:()=>v,Just:()=>b,Kvm:()=>d,Left:()=>o,Lst:()=>p,Maybe:()=>m,Nothing:()=>w,Num:()=>i,Reader:()=>A,Right:()=>s,Str:()=>a,Task:()=>g,Writer:()=>q,addEventListener:()=>S,getElementById:()=>j,querySelector:()=>E,querySelectorAll:()=>k,querySelectorWithin:()=>querySelectorWithin});class e{constructor(){if(new.target===e)throw new Error("Gonad is an abstract class and cannot be instantiated directly.")}map(t){throw new Error("'map' function must be implemented by subtype")}bind(t){throw new Error("'bind' must be implemented by subtype.")}chain(t){return this.bind(t)}flatMap(t){return this.bind(t)}extract(){throw new Error("'extract' must be implemented by subtype.")}join(){return this.extract()}get(){return this.extract()}getOrElse(t){let r=this.extract();return null==r?t:r}goe(t){return this.getOrElse(t)}eqg(t){return this.eq(t).get()}fork(t,r){throw new Error("'fork' function must be implemented by subtype")}bimap(t,r){return this.fork(t,r)}either(t,r){return this.fork(t,r)}static unit(t){throw new Error("unit must be implemented by subtype")}static of(t){return this.unit(t)}static pure(t){return this.unit(t)}extend(t){throw new Error("'extend' must be implemented by subtype.")}ap(t){throw new Error("'ap' must be implemented by subtype.")}type(){return this.constructor.name}}class Boo extends e{map(t){return x(new Boo(t(this.extract())))}bind(t){return t(this.extract())}extend(t){return t(this)}extract(){return this.value}eq(t){return this.map((r=>r==t))}not(){return x(new Boo(!this.extract()))}fork(t,r){let e=this.extract();return e?r(e):t(e)}isTrue(){return!0===this.extract()}isFalse(){return!this.isTrue()}dump(){return console.log(this.extract()),x(this)}constructor(t){super(),null==t&&(t=!1),this.value=t}}function n(t){return x(new Boo(t))}class Num extends e{static unit(t){return new Num(Number(t))}add(t){return this.map((r=>r+t))}sub(t){return this.map((r=>r-t))}mul(t){return this.map((r=>r*t))}div(t){return this.map((r=>r/t))}eq(t){return this.bind((r=>n(r===t)))}map(t){return x(new Num(t(this.extract())))}bind(t){return this.map(t).join()}extract(){return this.value}constructor(t){super(),this.value=t}}function i(t){return x(Num.of(t))}class Either extends e{extract(){return this.value}constructor(){if(super(),new.target===Either)throw new Error("Either is an abstract class and cannot be instantiated directly.")}dump(){return console.log(this.extract()),x(this)}}class Left extends Either{map(){return this}bind(){return this}getOrElse(t){return t}prop(t){return this}static unit(t){return new Left(t)}extract(){return this.value}fork(t,r){return t(this.extract())}ap(t){return this}tap(t){return this}extend(t){return this}eq(t){return!1}constructor(t){super(),this.value=t}}class Right extends Either{map(t){return Right.unit(t(this.extract()))}prop(t){let r=this.extract();return r&&("object"==typeof r||Array.isArray(r))&&t in r?Right.unit(r[t]):Left.unit('prop "'+t+'" not found')}call(t,...r){return this.prop(t).bind((e=>"function"==typeof e?Array.isArray(r[0])?f(e(...r[0])):f(e(...r)):Left.of('prop "'+t+'" is not callable')))}bind(t){return t(this.extract())}ap(t){return t.map(this.extract())}fork(t,r){return r(this.extract())}tap(t){return t(this.extract()),this}extend(t){return t(this)}static unit(t){return new Right(t)}extract(){return this.value}constructor(t){super(),this.value=t}}function u(t,r){return null==r&&(r=""),null==t?o(r):s(t)}function s(t){return x(new Right(t))}function o(t){return x(new Left(t))}class Str extends e{charAt(t){let r=this.extract().charAt(t);return 0==r?o("no character found at index "+t):x(Str.unit(r))}append(t){return x(new Str(this.extract()+t))}prepend(t){return x(new Str(t+this.extract()))}static unit(t){return new Str(String(t))}map(t){return x(new Str(t(this.extract())))}bind(t){return this.map(t).join()}extract(){return this.value}eq(t){return this.bind((r=>n(r===t)))}constructor(t){super(),this.value=t}dump(){return console.log(this.extract()),x(this)}}function a(t){return x(Str.of(t))}class Arr extends e{static unit(t){return new this(t)}head(){const[t]=this.extract();return void 0!==t?f(t):o("array contains no elements")}walk(t){let r=this.extract();return r.forEach(((e,n)=>t(e,n,r))),new Proxy(this,y)}map(t){let r=this.extract().map(t);return new Proxy(new Arr(r),y)}prop(t){let r=this.extract();return r&&("object"==typeof r||Array.isArray(r))&&t in r?f(r[t]):o('prop "'+t+'" not found')}call(t,...r){return this.prop(t).bind((e=>"function"==typeof e?Array.isArray(r[0])?f(e(...r[0])):f(e(...r)):o('prop "'+t+'" is not callable')))}ap(t){return this.map((r=>r(t.extract())))}bind(t){let r=this.extract(),e=[];return r.forEach(((r,n)=>e[n]=t(r).join())),new Proxy(new Arr(e),y)}extract(){return this.value}join(t){return t=null==t?"":t,a(this.extract().join(t))}fork(t,r){return r(this.extract())}extend(t){return t(this)}constructor(t){super(),void 0===t&&(t=[]),"object"==typeof t&&Array.isArray(t)||(t=[t]),this.value=t}}class c extends e{static unit(t){return new this(t)}head(){const[t]=this.extract();return void 0!==t?f(t):o("array contains no elements")}walk(t){let r=this.extract();return r.forEach(((e,n)=>t(e,n,r))),new Proxy(this,y)}map(t){let r=this.extract().map(t);return new Proxy(new c(r),y)}prop(t){let r=this.extract();return r&&("object"==typeof r||Array.isArray(r))&&t in r?f(r[t]):o('prop "'+t+'" not found')}call(t,...r){return this.prop(t).bind((e=>"function"==typeof e?Array.isArray(r[0])?f(e(...r[0])):f(e(...r)):o('prop "'+t+'" is not callable')))}ap(t){return this.map((r=>r(t.extract())))}bind(t){let r=this.extract(),e=[];return r.forEach(((r,n)=>e[n]=t(r).join())),new Proxy(new c(e),y)}extract(){return this.value}join(t){return t=null==t?"":t,a(this.extract().join(t))}fork(t,r){return r(this.extract())}extend(t){return t(this)}constructor(t){super(),void 0===t&&(t=[]),"object"==typeof t&&Array.isArray(t)||(t=[t]),this.value=t}}class l extends e{static unit(t){return new this(t)}walk(t){let r=this.extract();return Object.entries(r).forEach((([e,n])=>t(n,e,r))),new Proxy(this,y)}map(t){let r=this.extract(),e=Object.fromEntries(Object.entries(r).map((([r,e])=>[r,t(e)])));return new Proxy(new l(e),y)}prop(t){let r=this.extract();return r&&"object"==typeof r&&t in r?f(r[t]):o('prop "'+t+'" not found')}call(t,...r){return this.prop(t).bind((e=>"function"==typeof e?Array.isArray(r[0])?f(e(...r[0])):f(e(...r)):o('prop "'+t+'" is not callable')))}ap(t){return this.map((r=>r(t.extract())))}bind(t){let r=this.extract(),e={};return Object.entries(r).forEach((([r,n])=>{e[r]=t(n).extract()})),new Proxy(new l(e),y)}extract(){return this.value}join(t){return t=null==t?"":t,a(Object.values(this.extract()).join(t))}fork(t,r){return r(this.extract())}extend(t){return t(this)}constructor(t){super(),null==t&&(t={}),Array.isArray(t)&&(t=Object.fromEntries(t.map(((t,r)=>[r,t])))),"object"!=typeof t&&(t={value:t}),this.value=t}}function h(t){return null==t||"object"!=typeof t||Array.isArray(t)?x(Arr.of(t)):x(l.of(t))}function p(t){return x(c.of(t))}function d(t){return x(l.of(t))}function f(t){if(t instanceof e)return t;switch(typeof t){case"number":return i(t);case"string":return a(t);case"object":return Array.isArray(t)?h(t):s(t)}return s(t)}const y={get(t,r){const e={Nothing:w,Left:o},n=t.extract(),i=null==n?e[t.type()]():Object.getPrototypeOf(n);try{return"function"==typeof t[r]?function(...e){return t[r](...e)}:r in i?"function"==typeof n[r]?(...e)=>f(t.bind((t=>t[r](...e)))):()=>t.bind((t=>f(t[r]))):null==n[r]?"Just"==t.type()?()=>w():()=>o(`'${r}' not found.`):()=>f(n[r])}catch(t){return o(t.message)}}};function x(t){return new Proxy(t,y)}class Maybe extends e{extract(){return this.value}constructor(){if(super(),new.target===Maybe)throw new Error("Maybe is an abstract class and cannot be instantiated directly.")}dump(){return console.log(this.extract()),x(this)}}class Nothing extends Maybe{constructor(){super()}map(){return this}bind(){return this}ap(){return this}fork(t,r){return t()}extract(){return null}extend(){return this}static unit(){return new Nothing}}class Just extends Maybe{constructor(t){super(),this.value=t}prop(t){let r=this.extract();return r&&("object"==typeof r||Array.isArray(r))&&t in r?Just.unit(r[t]):Nothing.unit()}call(t,...r){return this.prop(t).bind((t=>"function"==typeof t?Array.isArray(r[0])?wrapType(t(...r[0])):wrapType(t(...r)):Nothing.of()))}map(t){return Just.of(t(this.extract()))}bind(t){return t(this.extract())}ap(t){return t.map(this.extract())}fork(t,r){return r(this.extract())}extend(t){return t(this)}static unit(t){return new Just(t)}}function m(t){return null==t?w():b(t)}function b(t){return x(new Just(t))}function w(){return x(new Nothing)}class Task extends e{constructor(t){super(),this.computation=t}static unit(t){return new Task(t)}map(t){return new Task(((r,e)=>{this.extract()(r,(r=>e(t(r))))}))}bind(t){return new Task(((r,e)=>{this.extract()(r,(n=>t(n).fork(r,e)))}))}extract(t){return this.computation}fork(t,r){return this.extract()(t,r)}ap(t){return new Task(((r,e)=>{this.fork(r,(n=>{t.fork(r,(t=>{e(n(t))}))}))}))}}function g(t){return Task.of(t)}class Future extends e{constructor(t){super(),this.computation=t()}static unit(t){return new Future((()=>Promise.resolve(t)))}map(t){return new Future((()=>this.computation.then(t)))}bind(t){return new Future((()=>this.computation.then((r=>t(r).computation))))}extract(){return this.computation}fork(t,r){this.extract().then(r).catch(t)}ap(t){return new Future((()=>this.computation.then((r=>t.computation.then((t=>r(t)))))))}sleep(t){return this.map((r=>new Promise((e=>setTimeout((()=>e(r)),t)))))}dump(){return this.computation.then((t=>{console.log(t)})),this}}function v(t){return new Future(t)}class Reader extends e{constructor(t){super(),this.action=t}static unit(t){return new Reader(t)}static of(t){return this.unit(value)}static pure(t){return this.unit(value)}map(t){return new Reader((r=>t(this.run(r))))}bind(t){return new Reader((r=>t(this.run(r)).run(r)))}ask(){return new Reader((t=>t))}local(t){return new Reader((r=>this.run(t(r))))}run(t){return this.action(t)}extend(t){return t(this)}dump(t){return console.log(this.run(t)),this}}function A(t){return Reader.unit(t)}class Dom{static getElementById(t){let r=document.getElementById(t);return null==r?o(`no element with id ${t} found`):s(r)}static querySelector(t){return Dom.querySelectorWithin(t,document)}static querySelectorWithin(t,r){let e=r.querySelector(t);return null==e?o(`no element with selector ${t} found`):s(e)}static querySelectorAll(t){let r=document.querySelectorAll(t);return 0==r.length?o(`no elements with selector ${t} found`):p(Array.from(r))}static addEventListener(t,r,e){try{e.addEventListener(t,r)}catch(t){return o("problem attaching event listener")}}}function j(t){return Dom.getElementById(t)}function E(t){return Dom.querySelector(t)}function querySelectorWithin(t,r){return Dom.querySelectorWithin(t,r)}function k(t){return Dom.querySelectorAll(t)}const S=function(t){const r=t.length;return function e(...n){return n.length>=r?t.apply(this,n):function(...t){return e.apply(this,n.concat(t))}}}(((t,r,e)=>Dom.addEventListener(t,r,e)));class Writer extends e{constructor(t,r=[]){super(),this.value=t,this.log=Array.isArray(r)?r:[r]}static unit(t,r){return new Writer(t,r)}static of(t,r){return this.unit(t,r)}static pure(t,r){return this.unit(t,r)}map(t){return new Writer(t(this.value),this.log)}bind(t){const r=t(this.value);return new Writer(r.value,[...this.log,...r.log])}tell(t){return new Writer(this.value,[...this.log,t])}extract(){return{value:this.value,log:this.log}}extend(t){return t(this)}fork(t,r){return r(this.extract())}dump(){return console.log(this.extract()),this}}function q(t,r){return Writer.of(t,r)}return r})()));